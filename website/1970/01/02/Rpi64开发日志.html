<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Rpi64开发日志 | Peach Blossom Spring</title><meta name="description" content="概览：   Environment  host rpi64   build linux kernel create img Partition format &amp; copy base kernel file  kpartx format mount check   Install kernel  DEPMOD 4.19.80-ARMv8_GuzalAida@rpi3b+   Install"><meta property="og:type" content="article"><meta property="og:title" content="Rpi64开发日志"><meta property="og:url" content="https://www.mardan.wiki/website/1970/01/02/Rpi64%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97.html"><meta property="og:site_name" content="Peach Blossom Spring"><meta property="og:description" content="概览：   Environment  host rpi64   build linux kernel create img Partition format &amp; copy base kernel file  kpartx format mount check   Install kernel  DEPMOD 4.19.80-ARMv8_GuzalAida@rpi3b+   Install"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="1970-01-01T16:00:00.000Z"><meta property="article:modified_time" content="2025-04-13T06:16:05.529Z"><meta property="article:author" content="Mardan M"><meta property="article:tag" content="kernel"><meta property="article:tag" content="rpi"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.mardan.wiki/website/1970/01/02/Rpi64%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97.html"><link rel="alternate" href="/atom.xml" title="Peach Blossom Spring" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="preconnect" , href="https://fonts.gstatic.com"><link rel="stylesheet" , href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap"><link rel="stylesheet" , href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap"><meta name="generator" content="Hexo 7.3.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/ka1i" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">Mardan M</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">DevOps Engineer</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Chengdu, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/ka1i" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/C/" style="font-size:13.57px">C#</a> <a href="/tags/SSM/" style="font-size:13px">SSM</a> <a href="/tags/TAAG/" style="font-size:13px">TAAG</a> <a href="/tags/arduino/" style="font-size:13px">arduino</a> <a href="/tags/certificate/" style="font-size:13px">certificate</a> <a href="/tags/cfdisk/" style="font-size:13px">cfdisk</a> <a href="/tags/cilium/" style="font-size:13.29px">cilium</a> <a href="/tags/conky/" style="font-size:13px">conky</a> <a href="/tags/cri-o/" style="font-size:13px">cri-o</a> <a href="/tags/daemon/" style="font-size:13.14px">daemon</a> <a href="/tags/date/" style="font-size:13px">date</a> <a href="/tags/ddns/" style="font-size:13px">ddns</a> <a href="/tags/docker/" style="font-size:13.86px">docker</a> <a href="/tags/features/" style="font-size:13px">features</a> <a href="/tags/git/" style="font-size:13.14px">git</a> <a href="/tags/github/" style="font-size:13.29px">github</a> <a href="/tags/golang/" style="font-size:13.57px">golang</a> <a href="/tags/goroutine/" style="font-size:13px">goroutine</a> <a href="/tags/gpg/" style="font-size:13px">gpg</a> <a href="/tags/gradle/" style="font-size:13px">gradle</a> <a href="/tags/grafana/" style="font-size:13px">grafana</a> <a href="/tags/grub/" style="font-size:13px">grub</a> <a href="/tags/gui/" style="font-size:13px">gui</a> <a href="/tags/hackintosh/" style="font-size:13px">hackintosh</a> <a href="/tags/hexo/" style="font-size:13.71px">hexo</a> <a href="/tags/hyper-V/" style="font-size:13px">hyper-V</a> <a href="/tags/java/" style="font-size:13.29px">java</a> <a href="/tags/jupyter/" style="font-size:13px">jupyter</a> <a href="/tags/kernel/" style="font-size:13.14px">kernel</a> <a href="/tags/kubernetes/" style="font-size:13.71px">kubernetes</a> <a href="/tags/kvm/" style="font-size:13px">kvm</a> <a href="/tags/kylinos/" style="font-size:13px">kylinos</a> <a href="/tags/lib/" style="font-size:13.14px">lib</a> <a href="/tags/linux/" style="font-size:14px">linux</a> <a href="/tags/loki/" style="font-size:13px">loki</a> <a href="/tags/lvm/" style="font-size:13px">lvm</a> <a href="/tags/macOS/" style="font-size:13.14px">macOS</a> <a href="/tags/mermaid/" style="font-size:13px">mermaid</a> <a href="/tags/minecraft/" style="font-size:13px">minecraft</a> <a href="/tags/minio/" style="font-size:13px">minio</a> <a href="/tags/mysql/" style="font-size:13px">mysql</a> <a href="/tags/nginx/" style="font-size:13.57px">nginx</a> <a href="/tags/openwrt/" style="font-size:13px">openwrt</a> <a href="/tags/osx/" style="font-size:13.14px">osx</a> <a href="/tags/postgresql/" style="font-size:13px">postgresql</a> <a href="/tags/prometheus/" style="font-size:13px">prometheus</a> <a href="/tags/proxy/" style="font-size:13px">proxy</a> <a href="/tags/pve/" style="font-size:13.14px">pve</a> <a href="/tags/python/" style="font-size:13px">python</a> <a href="/tags/qemu/" style="font-size:13px">qemu</a> <a href="/tags/rpi/" style="font-size:13.43px">rpi</a> <a href="/tags/rpm/" style="font-size:13px">rpm</a> <a href="/tags/selenium/" style="font-size:13px">selenium</a> <a href="/tags/shell/" style="font-size:13.14px">shell</a> <a href="/tags/springboot/" style="font-size:13px">springboot</a> <a href="/tags/sqlite/" style="font-size:13px">sqlite</a> <a href="/tags/ssh/" style="font-size:13.29px">ssh</a> <a href="/tags/ssl/" style="font-size:13px">ssl</a> <a href="/tags/startup/" style="font-size:13px">startup</a> <a href="/tags/swarm/" style="font-size:13px">swarm</a> <a href="/tags/tensorflow/" style="font-size:13px">tensorflow</a> <a href="/tags/terminal/" style="font-size:13.14px">terminal</a> <a href="/tags/time/" style="font-size:13px">time</a> <a href="/tags/traffic/" style="font-size:13px">traffic</a> <a href="/tags/watchdog/" style="font-size:13px">watchdog</a> <a href="/tags/whiptail/" style="font-size:13px">whiptail</a> <a href="/tags/win32/" style="font-size:13px">win32</a> <a href="/tags/wireguard/" style="font-size:13px">wireguard</a> <a href="/tags/wiringpi/" style="font-size:13px">wiringpi</a> <a href="/tags/wispeeer/" style="font-size:13px">wispeeer</a> <a href="/tags/wpf/" style="font-size:13px">wpf</a> <a href="/tags/x11/" style="font-size:13px">x11</a> <a href="/tags/zabbix/" style="font-size:13px">zabbix</a> <a href="/tags/zsh/" style="font-size:13px">zsh</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1970/01/">January 1970</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/kubernetes/">kubernetes</a></p><p class="item-title"><a href="/website/2023/10/23/%E9%93%B6%E6%B2%B3%E9%BA%92%E9%BA%9FKylinos%E5%AE%89%E8%A3%85kubernetes%E9%9B%86%E7%BE%A4.html" class="title">银河麒麟Kylinos安装kubernetes集群</a></p><p class="item-date"><time datetime="2023-10-23T14:30:13.000Z" itemprop="datePublished">2023-10-23</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/kubernetes/">kubernetes</a></p><p class="item-title"><a href="/website/2023/03/20/Cilium%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE.html" class="title">Cilium可观测性监控配置</a></p><p class="item-date"><time datetime="2023-03-20T10:28:13.000Z" itemprop="datePublished">2023-03-20</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/rpm/">rpm</a></p><p class="item-title"><a href="/website/2023/02/23/%E5%88%B6%E4%BD%9Cnginx%E7%9A%84rpm%E5%8C%85.html" class="title">制作nginx的rpm包</a></p><p class="item-date"><time datetime="2023-02-23T14:02:54.000Z" itemprop="datePublished">2023-02-23</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/wireguard/">wireguard</a></p><p class="item-title"><a href="/website/2023/02/21/wireguard%E5%9C%A8%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E7%9A%84%E5%A6%99%E7%94%A8.html" class="title">wireguard在家庭网络的妙用</a></p><p class="item-date"><time datetime="2023-02-21T15:12:38.000Z" itemprop="datePublished">2023-02-21</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/openwrt/">openwrt</a></p><p class="item-title"><a href="/website/2023/02/21/pve%E5%AE%89%E8%A3%85openwrt%E8%BD%AF%E8%B7%AF%E7%94%B1.html" class="title">pve安装openwrt软路由</a></p><p class="item-date"><time datetime="2023-02-21T14:14:35.000Z" itemprop="datePublished">2023-02-21</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-Rpi64开发日志" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Rpi64开发日志</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/website/1970/01/02/Rpi64%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97.html" class="article-date"><time datetime="1970-01-01T16:00:00.000Z" itemprop="datePublished">1970-01-02</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/rpi/">rpi</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/kernel/" rel="tag">kernel</a>, <a class="article-tag-link-link" href="/tags/rpi/" rel="tag">rpi</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 6.4k(words)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 39(minutes)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>概览：</p><ul><li><a href="#environment">Environment</a><ul><li><a href="#host">host</a></li><li><a href="#rpi64">rpi64</a></li></ul></li><li><a href="#build-linux-kernel">build linux kernel</a></li><li><a href="#create-img">create img</a></li><li><a href="#partition-format-copy-base-kernel-file">Partition format &amp; copy base kernel file</a><ul><li><a href="#kpartx">kpartx</a></li><li><a href="#format">format</a></li><li><a href="#mount">mount</a></li><li><a href="#check">check</a></li></ul></li><li><a href="#install-kernel">Install kernel</a><ul><li><a href="#depmod-41980-armv8_guzalaidarpi3b">DEPMOD 4.19.80-ARMv8_GuzalAida@rpi3b+</a></li></ul></li><li><a href="#install-rootfs">Install Rootfs</a><ul><li><a href="#install-firmware">Install Firmware</a></li><li><a href="#unmount-image">Unmount Image</a></li></ul></li><li><a href="#preparation-conditions">Preparation Conditions</a><ul><li><a href="#tools">tools:</a></li><li><a href="#%E4%B8%8A%E4%BC%A0%E9%95%9C%E5%83%8F%E8%87%B3%E6%A0%91%E8%8E%93%E6%B4%BE">上传镜像至树莓派</a></li><li><a href="#mount-disk-image">Mount disk image</a></li><li><a href="#debootstrap-%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">debootstrap 安装文件系统</a></li></ul></li><li><a href="#rootfs-configutre">Rootfs Configutre</a><ul><li><a href="#create-user">create user</a></li><li><a href="#update-mirrors">update mirrors</a></li><li><a href="#%E4%BF%AE%E6%94%B9etcresolvconf">修改/etc/resolv.conf</a></li><li><a href="#wifi%E5%9B%BD%E5%AE%B6%E8%AE%BE%E7%BD%AE">wifi国家设置</a></li><li><a href="#%E4%BF%AE%E6%94%B9fstsb">修改fstsb</a></li><li><a href="#ssh%E7%99%BB%E5%BD%95%E5%87%AD%E8%AF%81">ssh登录凭证</a></li><li><a href="#%E9%A2%9D%E5%A4%96%E8%BD%AF%E4%BB%B6">额外软件</a></li><li><a href="#%E6%97%B6%E5%8C%BA-tzdate">时区 tzdate</a></li><li><a href="#%E6%B7%BB%E5%8A%A0etcrpi-issue">添加/etc/rpi-issue</a></li></ul></li><li><a href="#%E5%AE%89%E8%A3%85wiringpi">安装WiringPi</a></li><li><a href="#%E8%AE%BE%E7%BD%AErsyslog">设置rsyslog</a></li><li><a href="#%E5%AE%89%E8%A3%85vc">安装VC</a></li><li><a href="#%E8%BF%9E%E6%8E%A55gwif">连接5GWIF</a></li><li><a href="#%E8%BF%BD%E5%8A%A0%E8%BD%AF%E4%BB%B6">追加软件</a></li><li><a href="#update-fstab">update fstab</a><ul><li><a href="#umount">umount</a><ul><li><a href="#%E5%8D%B8%E8%BD%BD%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">卸载文件系统</a></li><li><a href="#%E5%8D%B8%E8%BD%BD%E9%95%9C%E5%83%8F">卸载镜像</a></li></ul></li></ul></li><li><a href="#%E7%83%A7%E5%BD%95%E7%B3%BB%E7%BB%9F%E5%B9%B6%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9">烧录系统并磁盘扩容</a></li><li><a href="#vnc">VNC</a></li></ul><span id="more"></span><h1><span id="environment">Environment</span></h1><h2><span id="host">host</span></h2><ul><li><p>OS: Linux@mardan-ArchLabs : Linux Mint 19.2 Tina</p></li><li><p>host kernel: 4.15.0-65-generic x86_64</p></li><li><p>cross-compile(8.3-2019.03): <a target="_blank" rel="noopener" href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-a/downloads">AArch64 GNU/Linux target (aarch64-linux-gnu)</a></p></li><li><p>need tool</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install build-essential bison make</span><br><span class="line"><span class="built_in">sudo</span> apt install axel cmake cmake-curses-gui</span><br><span class="line"><span class="built_in">sudo</span> apt install kpartx util-linux f2fs-tools</span><br><span class="line"><span class="built_in">sudo</span> apt install libncurses5-dev libssl-dev</span><br></pre></td></tr></table></figure><h2><span id="rpi64">rpi64</span></h2><ul><li><p>rpi: RaspberryPi 3b+</p></li><li><p>OS: debian buster</p></li><li><p>kernel: <code>https://github.com/raspberrypi/linux</code> 4.19.76</p></li></ul><h1><span id="build-linux-kernel">build linux kernel</span></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make bcmrpi3_defconfig ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-</span><br><span class="line">make menuconfig ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-</span><br></pre></td></tr></table></figure><ul><li>CONFIG_LOCALVERSION=“-ARMv8_GuzalAida@rpi3b”</li><li>CONFIG_DEFAULT_HOSTNAME=“GuzalAida”</li><li>打开Control Group support</li><li>打开Checkpoint/restore support</li><li>打开Virtualization支持</li><li><s>启用文件系统f2fs的F2FS Security Labels</s></li><li>修改Boot options里的kernel command line中的rootfstype为rootfstype=f2fs</li><li>ARMv8.2 architectural features —&gt;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make -j9 ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- </span><br><span class="line"><span class="comment">#make -j9 ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-  6847.39s user 586.46s system 711% cpu 17:24.68 total</span></span><br></pre></td></tr></table></figure><h1><span id="create-img">create img</span></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> bs=1M count=4096 <span class="keyword">if</span>=/dev/zero of=rpi64-v4.19.80.img </span><br></pre></td></tr></table></figure><p>分区请看后续步骤：</p><p><em><strong>分区表 : dos</strong></em></p><p><code>Device Boot Start End Sectors Size Id Type</code></p><p>bootfs分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;  rpi64-v4.19.76.img1       *      2048     718847     716800     350M     b W95 FAT32       </span><br><span class="line">┌────────────────────────────────────────────────────────────┐</span><br><span class="line">│  Partition <span class="built_in">type</span>: W95 FAT32 (b)                             │ </span><br><span class="line">│      Attributes: 80                                        │</span><br><span class="line">│ Filesystem UUID: 83C0-51BA                                 │</span><br><span class="line">│Filesystem LABEL: bootfs                                    │</span><br><span class="line">│      Filesystem: vfat                                      │</span><br><span class="line">└────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure><p>rootfs分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;  rpi64-v4.19.76.img2            718848    8388607    7669760     3.7G    83 Linux           </span><br><span class="line"> ┌───────────────────────────────────────────────────────────┐</span><br><span class="line"> │  Partition <span class="built_in">type</span>: Linux (83)                               │</span><br><span class="line"> │ Filesystem UUID: 4a1a7d18-c62f-4abb-84be-4bbc41d12f75     │</span><br><span class="line"> │Filesystem LABEL: rootfs                                   │</span><br><span class="line"> │      Filesystem: f2fs                                     │</span><br><span class="line"> └───────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure><h1><span id="partition-format-amp-copy-base-kernel-file">Partition format &amp; copy base kernel file</span></h1><h2><span id="kpartx">kpartx</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> kpartx -av rpi64-v4.19.76.img</span><br><span class="line">add map loop0p1 (253:0): 0 716800 linear 7:0 2048</span><br><span class="line">add map loop0p2 (253:1): 0 7669760 linear 7:0 718848</span><br></pre></td></tr></table></figure><h2><span id="format">format</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">(base) </span><br><span class="line">┌─[mardan@Mardan-ArchLabs] - [~/workspace/EmbeddedDevelopment/rpi64@GuzalAida/rpi64os] - [Fri Oct 11, 10:01]</span><br><span class="line">└─[$] &lt;&gt; <span class="built_in">sudo</span> mkfs.vfat  /dev/mapper/loop0p1 -n bootfs</span><br><span class="line">mkfs.fat 4.1 (2017-01-24)</span><br><span class="line">mkfs.fat: warning - lowercase labels might not work properly with DOS or Windows</span><br><span class="line">(base) </span><br><span class="line">┌─[mardan@Mardan-ArchLabs] - [~/workspace/EmbeddedDevelopment/rpi64@GuzalAida/rpi64os] - [Fri Oct 11, 10:02]</span><br><span class="line">└─[$] &lt;&gt; <span class="built_in">sudo</span> mkfs.f2fs /dev/mapper/loop0p2 -l rootfs</span><br><span class="line"></span><br><span class="line">	F2FS-tools: mkfs.f2fs Ver: 1.11.0 (2018-07-10)</span><br><span class="line"></span><br><span class="line">Info: Disable heap-based policy</span><br><span class="line">Info: Debug level = 0</span><br><span class="line">Info: Label = rootfs</span><br><span class="line">Info: Trim is enabled</span><br><span class="line">Info: Segments per section = 1</span><br><span class="line">Info: Sections per zone = 1</span><br><span class="line">Info: sector size = 512</span><br><span class="line">Info: total sectors = 7669760 (3745 MB)</span><br><span class="line">Info: zone aligned segment0 blkaddr: 512</span><br><span class="line">Info: format version with</span><br><span class="line">  <span class="string">&quot;Linux version 4.15.0-65-generic (buildd@lgw01-amd64-006) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) #74-Ubuntu SMP Tue Sep 17 17:06:04 UTC 2019&quot;</span></span><br><span class="line">Info: [/dev/mapper/loop0p2] Discarding device</span><br><span class="line">Info: This device doesn<span class="string">&#x27;t support BLKSECDISCARD</span></span><br><span class="line"><span class="string">Info: Discarded 3745 MB</span></span><br><span class="line"><span class="string">Info: Overprovision ratio = 3.290%</span></span><br><span class="line"><span class="string">Info: Overprovision segments = 126 (GC reserved = 68)</span></span><br><span class="line"><span class="string">Info: format successful</span></span><br></pre></td></tr></table></figure><h2><span id="mount">mount</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mount /dev/mapper/loop0p1 bootfs</span><br><span class="line"><span class="built_in">sudo</span> mount /dev/mapper/loop0p2 rootfs</span><br></pre></td></tr></table></figure><h2><span id="check">check</span></h2><p><code>df -hT</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Filesystem          Type      Size  Used Avail Use% Mounted on</span><br><span class="line">udev                devtmpfs  3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs               tmpfs     787M  1.7M  785M   1% /run</span><br><span class="line">/dev/sda3           ext4      118G   59G   54G  53% /</span><br><span class="line">tmpfs               tmpfs     3.9G   17M  3.9G   1% /dev/shm</span><br><span class="line">tmpfs               tmpfs     5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs               tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sdb2           vfat       96M   31M   66M  33% /boot/efi</span><br><span class="line">tmpfs               tmpfs     787M   32K  787M   1% /run/user/1000</span><br><span class="line">/dev/mapper/loop0p1 vfat      350M     0  350M   0% /home/mardan/workspace/EmbeddedDevelopment/rpi64@GuzalAida/rpi64os/bootfs</span><br><span class="line">/dev/mapper/loop0p2 f2fs      3.7G   38M  3.4G   2% /home/mardan/workspace/EmbeddedDevelopment/rpi64@GuzalAida/rpi64os/rootfs</span><br></pre></td></tr></table></figure><h1><span id="install-kernel">Install kernel</span></h1><p>!!! You can need still kernel build finish.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -v <span class="built_in">arch</span>/arm64/boot/Image ../../rpi64os/bootfs/kernel8.img</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -v <span class="built_in">arch</span>/arm64/boot/Image.gz ../../rpi64os/bootfs/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -v <span class="built_in">arch</span>/arm64/boot/dts/broadcom/bcm2*3-b-plus.dtb ../../rpi64os/bootfs/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> ../../rpi64os/bootfs/overlays</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -vr <span class="built_in">arch</span>/arm64/boot/dts/overlays/*.dtbo ../../rpi64os/bootfs/overlays</span><br><span class="line"><span class="built_in">sudo</span> su</span><br><span class="line">make modules_install INSTALL_MOD_PATH=../../rpi64os/rootfs/ ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-</span><br></pre></td></tr></table></figure><h2><span id="depmod-41980-armv8_guzalaidarpi3b">DEPMOD 4.19.80-ARMv8_GuzalAida@rpi3b+</span></h2><ul><li>发布<a target="_blank" rel="noopener" href="https://github.com/GuzalAida/linux/releases">rpi64-v4.19.71.img</a></li></ul><p>bootfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bcm2710-rpi-3-b-plus.dtb  config.txt     fixup_db.dat  kernel8.img       start_db.elf</span><br><span class="line">bcm2837-rpi-3-b-plus.dtb  COPYING.linux  fixup_x.dat   LICENCE.broadcom  start.elf</span><br><span class="line">bootcode.bin              fixup_cd.dat   Image.gz      overlays          start_x.elf</span><br><span class="line">cmdline.txt               fixup.dat      issue.txt     start_cd.elf</span><br></pre></td></tr></table></figure><h1><span id="install-rootfs">Install Rootfs</span></h1><h2><span id="install-firmware">Install Firmware</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">(base) </span><br><span class="line">┌─[mardan@Mardan-ArchLabs] - [~/workspace/EmbeddedDevelopment/rpi64@GuzalAida/rpi64os/rootfs] - [Wed Oct 09, 18:58]</span><br><span class="line">└─[$] &lt;&gt; tree -L 3</span><br><span class="line">.</span><br><span class="line">└── lib</span><br><span class="line">    ├── firmware</span><br><span class="line">    │   ├── 3com</span><br><span class="line">    │   ├── a300_pfp.fw -&gt; qcom/a300_pfp.fw</span><br><span class="line">    │   ├── a300_pm4.fw -&gt; qcom/a300_pm4.fw</span><br><span class="line">    │   ├── acenic</span><br><span class="line">    │   ├── adaptec</span><br><span class="line">    │   ├── advansys</span><br><span class="line">    │   ├── agere_ap_fw.bin</span><br><span class="line">    │   ├── agere_sta_fw.bin</span><br><span class="line">    │   ├── amdgpu</span><br><span class="line">    │   ├── amd-ucode</span><br><span class="line">    │   ├── ar3k</span><br><span class="line">    │   ├── ar5523.bin</span><br><span class="line">    │   ├── ar7010_1_1.fw</span><br><span class="line">    │   ├── ar7010.fw</span><br><span class="line">    │   ├── ar9271.fw</span><br><span class="line">    │   ├── as102_data1_st.hex</span><br><span class="line">    │   ├── as102_data2_st.hex</span><br><span class="line">    │   ├── ath10k</span><br><span class="line">    │   ├── ath3k-1.fw</span><br><span class="line">    │   ├── ath6k</span><br><span class="line">    │   ├── ath9k_htc</span><br><span class="line">    │   ├── atmel</span><br><span class="line">    │   ├── atusb</span><br><span class="line">    │   ├── av7110</span><br><span class="line">    │   ├── BCM2033-FW.bin</span><br><span class="line">    │   ├── BCM2033-MD.hex</span><br><span class="line">    │   ├── bnx2</span><br><span class="line">    │   ├── bnx2x</span><br><span class="line">    │   ├── brcm</span><br><span class="line">			--more--</span><br><span class="line">    │   ├── v4l-cx231xx-avcore-01.fw</span><br><span class="line">    │   ├── v4l-cx23418-apu.fw</span><br><span class="line">    │   ├── v4l-cx23418-cpu.fw</span><br><span class="line">    │   ├── v4l-cx23418-dig.fw</span><br><span class="line">    │   ├── v4l-cx23885-avcore-01.fw</span><br><span class="line">    │   ├── v4l-cx25840.fw</span><br><span class="line">    │   ├── vicam</span><br><span class="line">    │   ├── vntwusb.fw</span><br><span class="line">    │   ├── vpu_d.bin</span><br><span class="line">    │   ├── vpu_p.bin</span><br><span class="line">    │   ├── vxge</span><br><span class="line">    │   ├── WHENCE</span><br><span class="line">    │   ├── wil6210.brd</span><br><span class="line">    │   ├── wil6210.fw</span><br><span class="line">    │   ├── yam</span><br><span class="line">    │   └── yamaha</span><br><span class="line">    └── modules</span><br><span class="line">        └── 4.19.76-ARMv8_GuzalAida@rpi3b+</span><br></pre></td></tr></table></figure><h2><span id="unmount-image">Unmount Image</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sync</span>   <span class="comment"># 同步写入</span></span><br><span class="line"><span class="built_in">sudo</span> umount bootfs rootfs</span><br><span class="line"><span class="built_in">sudo</span> kpartx -dv /dev/loop0</span><br><span class="line"><span class="built_in">sudo</span> losetup -d /dev/loop0</span><br></pre></td></tr></table></figure><h1><span id="preparation-conditions">Preparation Conditions</span></h1><p>!!! This part run on RaspberryPi, <strong>cpu=64b</strong></p><h2><span id="tools">tools:</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install build-essential bison make -y</span><br><span class="line"><span class="built_in">sudo</span> apt install axel cmake -y</span><br><span class="line"><span class="built_in">sudo</span> apt install kpartx util-linux f2fs-tools -y</span><br><span class="line"><span class="built_in">sudo</span> apt install debootstrap -y</span><br></pre></td></tr></table></figure><h2><span id="上传镜像至树莓派">上传镜像至树莓派</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(base) ┌─[mardan@mardan-ArchLabs] - [~/workSpace/rpi64@GuzalAida/rpi64os] - [Sun Sep 15, 16:08]</span><br><span class="line">└─[$] &lt;&gt; <span class="keyword">time</span> scp rpi64-v4.19.71.img guzal@192.168.1.129:~/</span><br><span class="line">guzal@192.168.1.129<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">rpi64-v4.19.71.img                                               100% 4096MB  13.1MB/s   05:13    </span></span><br><span class="line"><span class="string">scp rpi64-v4.19.71.img guzal@192.168.1.129:~/  33.68s user 41.45s system 23% cpu 5:19.11 total</span></span><br></pre></td></tr></table></figure><h2><span id="mount-disk-image">Mount disk image</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">guzal@GuzalAida:~$ <span class="built_in">ls</span></span><br><span class="line">bootfs  rootfs  rpi64-v4.19.71.img</span><br><span class="line"></span><br><span class="line">guzal@GuzalAida:~$ <span class="built_in">df</span> -hT</span><br><span class="line">Filesystem          Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/root           f2fs       30G  6.3G   24G  22% /</span><br><span class="line">devtmpfs            devtmpfs  454M     0  454M   0% /dev</span><br><span class="line">tmpfs               tmpfs     459M     0  459M   0% /dev/shm</span><br><span class="line">tmpfs               tmpfs     459M   14M  446M   3% /run</span><br><span class="line">tmpfs               tmpfs     5.0M     0  5.0M   0% /run/lock</span><br><span class="line">tmpfs               tmpfs     459M     0  459M   0% /sys/fs/cgroup</span><br><span class="line">/dev/mmcblk0p1      vfat      120M   32M   89M  27% /boot</span><br><span class="line">tmpfs               tmpfs      92M     0   92M   0% /run/user/1000</span><br><span class="line">/dev/mapper/loop0p1 vfat      200M   32M  169M  16% /home/guzal/bootfs</span><br><span class="line">/dev/mapper/loop0p2 f2fs      3.9G  386M  3.5G  10% /home/guzal/rootfs</span><br></pre></td></tr></table></figure><h2><span id="debootstrap-安装文件系统">debootstrap 安装文件系统</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> debootstrap --<span class="built_in">arch</span>=arm64 buster rootfs/ https://mirrors.tuna.tsinghua.edu.cn/debian</span><br></pre></td></tr></table></figure><details><summary style="color:#00008b">sudo debootstrap --arch=arm64 buster rootfs/ 执行结果输出</summary><pre><code>guzal@GuzalAida:~$ sudo debootstrap --arch=arm64 buster rootfs/
I: Target architecture can be executed
I: Retrieving InRelease 
I: Checking Release signature
I: Valid Release signature (key id 6D33866EDD8FFA41C0143AEDDCC9EFBF77E11517)
I: Retrieving Packages 
I: Validating Packages 
I: Resolving dependencies of required packages...
I: Resolving dependencies of base packages...
I: Checking component main on http://deb.debian.org/debian...
I: Retrieving libacl1 2.2.53-4
I: Validating libacl1 2.2.53-4
I: Retrieving adduser 3.118
I: Validating adduser 3.118
I: Retrieving libapparmor1 2.13.2-10
I: Validating libapparmor1 2.13.2-10
I: Retrieving apt 1.8.2
I: Validating apt 1.8.2
I: Retrieving apt-utils 1.8.2
I: Validating apt-utils 1.8.2
I: Retrieving libapt-inst2.0 1.8.2
I: Validating libapt-inst2.0 1.8.2
I: Retrieving libapt-pkg5.0 1.8.2
I: Validating libapt-pkg5.0 1.8.2
I: Retrieving libargon2-1 0~20171227-0.2
I: Validating libargon2-1 0~20171227-0.2
I: Retrieving libattr1 1:2.4.48-4
I: Validating libattr1 1:2.4.48-4
I: Retrieving libaudit-common 1:2.8.4-3
I: Validating libaudit-common 1:2.8.4-3
I: Retrieving libaudit1 1:2.8.4-3
I: Validating libaudit1 1:2.8.4-3
I: Retrieving base-files 10.3+deb10u1
I: Validating base-files 10.3+deb10u1
I: Retrieving base-passwd 3.5.46
I: Validating base-passwd 3.5.46
I: Retrieving bash 5.0-4
I: Validating bash 5.0-4
I: Retrieving libdns-export1104 1:9.11.5.P4+dfsg-5.1
I: Validating libdns-export1104 1:9.11.5.P4+dfsg-5.1
I: Retrieving libisc-export1100 1:9.11.5.P4+dfsg-5.1
I: Validating libisc-export1100 1:9.11.5.P4+dfsg-5.1
I: Retrieving bsdmainutils 11.1.2+b1
I: Validating bsdmainutils 11.1.2+b1
I: Retrieving libbz2-1.0 1.0.6-9.2~deb10u1
I: Validating libbz2-1.0 1.0.6-9.2~deb10u1
I: Retrieving libdebconfclient0 0.249
I: Validating libdebconfclient0 0.249
I: Retrieving coreutils 8.30-3
I: Validating coreutils 8.30-3
I: Retrieving cpio 2.12+dfsg-9
I: Validating cpio 2.12+dfsg-9
I: Retrieving cron 3.0pl1-134
I: Validating cron 3.0pl1-134
I: Retrieving libcryptsetup12 2:2.1.0-5+deb10u2
I: Validating libcryptsetup12 2:2.1.0-5+deb10u2
I: Retrieving dash 0.5.10.2-5
I: Validating dash 0.5.10.2-5
I: Retrieving libdb5.3 5.3.28+dfsg1-0.5
I: Validating libdb5.3 5.3.28+dfsg1-0.5
I: Retrieving debconf 1.5.71
I: Validating debconf 1.5.71
I: Retrieving debconf-i18n 1.5.71
I: Validating debconf-i18n 1.5.71
I: Retrieving debian-archive-keyring 2019.1
I: Validating debian-archive-keyring 2019.1
I: Retrieving debianutils 4.8.6.1
I: Validating debianutils 4.8.6.1
I: Retrieving diffutils 1:3.7-3
I: Validating diffutils 1:3.7-3
I: Retrieving dmidecode 3.2-1
I: Validating dmidecode 3.2-1
I: Retrieving dpkg 1.19.7
I: Validating dpkg 1.19.7
I: Retrieving e2fsprogs 1.44.5-1+deb10u1
I: Validating e2fsprogs 1.44.5-1+deb10u1
I: Retrieving libcom-err2 1.44.5-1+deb10u1
I: Validating libcom-err2 1.44.5-1+deb10u1
I: Retrieving libext2fs2 1.44.5-1+deb10u1
I: Validating libext2fs2 1.44.5-1+deb10u1
I: Retrieving libss2 1.44.5-1+deb10u1
I: Validating libss2 1.44.5-1+deb10u1
I: Retrieving libelf1 0.176-1.1
I: Validating libelf1 0.176-1.1
I: Retrieving findutils 4.6.0+git+20190209-2
I: Validating findutils 4.6.0+git+20190209-2
I: Retrieving gcc-8-base 8.3.0-6
I: Validating gcc-8-base 8.3.0-6
I: Retrieving libgcc1 1:8.3.0-6
I: Validating libgcc1 1:8.3.0-6
I: Retrieving libstdc++6 8.3.0-6
I: Validating libstdc++6 8.3.0-6
I: Retrieving gdbm-l10n 1.18.1-4
I: Validating gdbm-l10n 1.18.1-4
I: Retrieving libc-bin 2.28-10
I: Validating libc-bin 2.28-10
I: Retrieving libc6 2.28-10
I: Validating libc6 2.28-10
I: Retrieving libgmp10 2:6.1.2+dfsg-4
I: Validating libgmp10 2:6.1.2+dfsg-4
I: Retrieving gpgv 2.2.12-1+deb10u1
I: Validating gpgv 2.2.12-1+deb10u1
I: Retrieving libgnutls30 3.6.7-4
I: Validating libgnutls30 3.6.7-4
I: Retrieving grep 3.3-1
I: Validating grep 3.3-1
I: Retrieving gzip 1.9-3
I: Validating gzip 1.9-3
I: Retrieving hostname 3.21
I: Validating hostname 3.21
I: Retrieving ifupdown 0.8.35
I: Validating ifupdown 0.8.35
I: Retrieving init 1.56+nmu1
I: Validating init 1.56+nmu1
I: Retrieving init-system-helpers 1.56+nmu1
I: Validating init-system-helpers 1.56+nmu1
I: Retrieving iproute2 4.20.0-2
I: Validating iproute2 4.20.0-2
I: Retrieving iptables 1.8.2-4
I: Validating iptables 1.8.2-4
I: Retrieving libip4tc0 1.8.2-4
I: Validating libip4tc0 1.8.2-4
I: Retrieving libip6tc0 1.8.2-4
I: Validating libip6tc0 1.8.2-4
I: Retrieving libiptc0 1.8.2-4
I: Validating libiptc0 1.8.2-4
I: Retrieving libxtables12 1.8.2-4
I: Validating libxtables12 1.8.2-4
I: Retrieving iputils-ping 3:20180629-2
I: Validating iputils-ping 3:20180629-2
I: Retrieving isc-dhcp-client 4.4.1-2
I: Validating isc-dhcp-client 4.4.1-2
I: Retrieving isc-dhcp-common 4.4.1-2
I: Validating isc-dhcp-common 4.4.1-2
I: Retrieving libjson-c3 0.12.1+ds-2
I: Validating libjson-c3 0.12.1+ds-2
I: Retrieving kmod 26-1
I: Validating kmod 26-1
I: Retrieving libkmod2 26-1
I: Validating libkmod2 26-1
I: Retrieving less 487-0.1+b1
I: Validating less 487-0.1+b1
I: Retrieving libbsd0 0.9.1-2
I: Validating libbsd0 0.9.1-2
I: Retrieving libcap-ng0 0.7.9-2
I: Validating libcap-ng0 0.7.9-2
I: Retrieving libcap2 1:2.25-2
I: Validating libcap2 1:2.25-2
I: Retrieving libcap2-bin 1:2.25-2
I: Validating libcap2-bin 1:2.25-2
I: Retrieving libestr0 0.1.10-2.1
I: Validating libestr0 0.1.10-2.1
I: Retrieving libfastjson4 0.99.8-2
I: Validating libfastjson4 0.99.8-2
I: Retrieving libffi6 3.2.1-9
I: Validating libffi6 3.2.1-9
I: Retrieving libgcrypt20 1.8.4-5
I: Validating libgcrypt20 1.8.4-5
I: Retrieving libgpg-error0 1.35-1
I: Validating libgpg-error0 1.35-1
I: Retrieving libidn11 1.33-2.2
I: Validating libidn11 1.33-2.2
I: Retrieving libidn2-0 2.0.5-1
I: Validating libidn2-0 2.0.5-1
I: Retrieving liblocale-gettext-perl 1.07-3+b4
I: Validating liblocale-gettext-perl 1.07-3+b4
I: Retrieving liblognorm5 2.0.5-1
I: Validating liblognorm5 2.0.5-1
I: Retrieving libmnl0 1.0.4-2
I: Validating libmnl0 1.0.4-2
I: Retrieving libnetfilter-conntrack3 1.0.7-1
I: Validating libnetfilter-conntrack3 1.0.7-1
I: Retrieving libnfnetlink0 1.0.1-3+b1
I: Validating libnfnetlink0 1.0.1-3+b1
I: Retrieving libnftnl11 1.1.2-2
I: Validating libnftnl11 1.1.2-2
I: Retrieving libseccomp2 2.3.3-4
I: Validating libseccomp2 2.3.3-4
I: Retrieving libselinux1 2.8-1+b1
I: Validating libselinux1 2.8-1+b1
I: Retrieving libsemanage-common 2.8-2
I: Validating libsemanage-common 2.8-2
I: Retrieving libsemanage1 2.8-2
I: Validating libsemanage1 2.8-2
I: Retrieving libsepol1 2.8-1
I: Validating libsepol1 2.8-1
I: Retrieving libtasn1-6 4.13-3
I: Validating libtasn1-6 4.13-3
I: Retrieving libtext-charwidth-perl 0.04-7.1+b1
I: Validating libtext-charwidth-perl 0.04-7.1+b1
I: Retrieving libtext-iconv-perl 1.7-5+b6
I: Validating libtext-iconv-perl 1.7-5+b6
I: Retrieving libtext-wrapi18n-perl 0.06-7.1
I: Validating libtext-wrapi18n-perl 0.06-7.1
I: Retrieving libunistring2 0.9.10-1
I: Validating libunistring2 0.9.10-1
I: Retrieving libzstd1 1.3.8+dfsg-3
I: Validating libzstd1 1.3.8+dfsg-3
I: Retrieving logrotate 3.14.0-4
I: Validating logrotate 3.14.0-4
I: Retrieving lsb-base 10.2019051400
I: Validating lsb-base 10.2019051400
I: Retrieving dmsetup 2:1.02.155-3
I: Validating dmsetup 2:1.02.155-3
I: Retrieving libdevmapper1.02.1 2:1.02.155-3
I: Validating libdevmapper1.02.1 2:1.02.155-3
I: Retrieving liblz4-1 1.8.3-1
I: Validating liblz4-1 1.8.3-1
I: Retrieving mawk 1.3.3-17+b3
I: Validating mawk 1.3.3-17+b3
I: Retrieving nano 3.2-3
I: Validating nano 3.2-3
I: Retrieving libncurses6 6.1+20181013-2+deb10u1
I: Validating libncurses6 6.1+20181013-2+deb10u1
I: Retrieving libncursesw6 6.1+20181013-2+deb10u1
I: Validating libncursesw6 6.1+20181013-2+deb10u1
I: Retrieving libtinfo6 6.1+20181013-2+deb10u1
I: Validating libtinfo6 6.1+20181013-2+deb10u1
I: Retrieving ncurses-base 6.1+20181013-2+deb10u1
I: Validating ncurses-base 6.1+20181013-2+deb10u1
I: Retrieving ncurses-bin 6.1+20181013-2+deb10u1
I: Validating ncurses-bin 6.1+20181013-2+deb10u1
I: Retrieving netbase 5.6
I: Validating netbase 5.6
I: Retrieving libhogweed4 3.4.1-1
I: Validating libhogweed4 3.4.1-1
I: Retrieving libnettle6 3.4.1-1
I: Validating libnettle6 3.4.1-1
I: Retrieving libnewt0.52 0.52.20-8
I: Validating libnewt0.52 0.52.20-8
I: Retrieving whiptail 0.52.20-8
I: Validating whiptail 0.52.20-8
I: Retrieving libssl1.1 1.1.1c-1
I: Validating libssl1.1 1.1.1c-1
I: Retrieving libp11-kit0 0.23.15-2
I: Validating libp11-kit0 0.23.15-2
I: Retrieving libpam-modules 1.3.1-5
I: Validating libpam-modules 1.3.1-5
I: Retrieving libpam-modules-bin 1.3.1-5
I: Validating libpam-modules-bin 1.3.1-5
I: Retrieving libpam-runtime 1.3.1-5
I: Validating libpam-runtime 1.3.1-5
I: Retrieving libpam0g 1.3.1-5
I: Validating libpam0g 1.3.1-5
I: Retrieving libpcre3 2:8.39-12
I: Validating libpcre3 2:8.39-12
I: Retrieving perl-base 5.28.1-6
I: Validating perl-base 5.28.1-6
I: Retrieving libpopt0 1.16-12
I: Validating libpopt0 1.16-12
I: Retrieving libprocps7 2:3.3.15-2
I: Validating libprocps7 2:3.3.15-2
I: Retrieving procps 2:3.3.15-2
I: Validating procps 2:3.3.15-2
I: Retrieving readline-common 7.0-5
I: Validating readline-common 7.0-5
I: Retrieving rsyslog 8.1901.0-1
I: Validating rsyslog 8.1901.0-1
I: Retrieving sed 4.7-1
I: Validating sed 4.7-1
I: Retrieving sensible-utils 0.0.12
I: Validating sensible-utils 0.0.12
I: Retrieving login 1:4.5-1.1
I: Validating login 1:4.5-1.1
I: Retrieving passwd 1:4.5-1.1
I: Validating passwd 1:4.5-1.1
I: Retrieving libslang2 2.3.2-2
I: Validating libslang2 2.3.2-2
I: Retrieving libsystemd0 241-7~deb10u1
I: Validating libsystemd0 241-7~deb10u1
I: Retrieving libudev1 241-7~deb10u1
I: Validating libudev1 241-7~deb10u1
I: Retrieving systemd 241-7~deb10u1
I: Validating systemd 241-7~deb10u1
I: Retrieving systemd-sysv 241-7~deb10u1
I: Validating systemd-sysv 241-7~deb10u1
I: Retrieving udev 241-7~deb10u1
I: Validating udev 241-7~deb10u1
I: Retrieving sysvinit-utils 2.93-8
I: Validating sysvinit-utils 2.93-8
I: Retrieving tar 1.30+dfsg-6
I: Validating tar 1.30+dfsg-6
I: Retrieving tasksel 3.53
I: Validating tasksel 3.53
I: Retrieving tasksel-data 3.53
I: Validating tasksel-data 3.53
I: Retrieving tzdata 2019b-0+deb10u1
I: Validating tzdata 2019b-0+deb10u1
I: Retrieving bsdutils 1:2.33.1-0.1
I: Validating bsdutils 1:2.33.1-0.1
I: Retrieving fdisk 2.33.1-0.1
I: Validating fdisk 2.33.1-0.1
I: Retrieving libblkid1 2.33.1-0.1
I: Validating libblkid1 2.33.1-0.1
I: Retrieving libfdisk1 2.33.1-0.1
I: Validating libfdisk1 2.33.1-0.1
I: Retrieving libmount1 2.33.1-0.1
I: Validating libmount1 2.33.1-0.1
I: Retrieving libsmartcols1 2.33.1-0.1
I: Validating libsmartcols1 2.33.1-0.1
I: Retrieving libuuid1 2.33.1-0.1
I: Validating libuuid1 2.33.1-0.1
I: Retrieving mount 2.33.1-0.1
I: Validating mount 2.33.1-0.1
I: Retrieving util-linux 2.33.1-0.1
I: Validating util-linux 2.33.1-0.1
I: Retrieving vim-common 2:8.1.0875-5
I: Validating vim-common 2:8.1.0875-5
I: Retrieving vim-tiny 2:8.1.0875-5
I: Validating vim-tiny 2:8.1.0875-5
I: Retrieving xxd 2:8.1.0875-5
I: Validating xxd 2:8.1.0875-5
I: Retrieving liblzma5 5.2.4-1
I: Validating liblzma5 5.2.4-1
I: Retrieving zlib1g 1:1.2.11.dfsg-1
I: Validating zlib1g 1:1.2.11.dfsg-1
I: Chosen extractor for .deb packages: dpkg-deb
I: Extracting libacl1...
I: Extracting adduser...
I: Extracting apt...
I: Extracting libapt-pkg5.0...
I: Extracting libattr1...
I: Extracting libaudit-common...
I: Extracting libaudit1...
I: Extracting base-files...
I: Extracting base-passwd...
I: Extracting bash...
I: Extracting libbz2-1.0...
I: Extracting libdebconfclient0...
I: Extracting coreutils...
I: Extracting dash...
I: Extracting libdb5.3...
I: Extracting debconf...
I: Extracting debian-archive-keyring...
I: Extracting debianutils...
I: Extracting diffutils...
I: Extracting dpkg...
I: Extracting e2fsprogs...
I: Extracting libcom-err2...
I: Extracting libext2fs2...
I: Extracting libss2...
I: Extracting findutils...
I: Extracting gcc-8-base...
I: Extracting libgcc1...
I: Extracting libstdc++6...
I: Extracting libc-bin...
I: Extracting libc6...
I: Extracting libgmp10...
I: Extracting gpgv...
I: Extracting libgnutls30...
I: Extracting grep...
I: Extracting gzip...
I: Extracting hostname...
I: Extracting init-system-helpers...
I: Extracting libcap-ng0...
I: Extracting libffi6...
I: Extracting libgcrypt20...
I: Extracting libgpg-error0...
I: Extracting libidn2-0...
I: Extracting libseccomp2...
I: Extracting libselinux1...
I: Extracting libsemanage-common...
I: Extracting libsemanage1...
I: Extracting libsepol1...
I: Extracting libtasn1-6...
I: Extracting libunistring2...
I: Extracting libzstd1...
I: Extracting liblz4-1...
I: Extracting mawk...
I: Extracting libncursesw6...
I: Extracting libtinfo6...
I: Extracting ncurses-base...
I: Extracting ncurses-bin...
I: Extracting libhogweed4...
I: Extracting libnettle6...
I: Extracting libp11-kit0...
I: Extracting libpam-modules...
I: Extracting libpam-modules-bin...
I: Extracting libpam-runtime...
I: Extracting libpam0g...
I: Extracting libpcre3...
I: Extracting perl-base...
I: Extracting sed...
I: Extracting login...
I: Extracting passwd...
I: Extracting libsystemd0...
I: Extracting libudev1...
I: Extracting sysvinit-utils...
I: Extracting tar...
I: Extracting tzdata...
I: Extracting bsdutils...
I: Extracting fdisk...
I: Extracting libblkid1...
I: Extracting libfdisk1...
I: Extracting libmount1...
I: Extracting libsmartcols1...
I: Extracting libuuid1...
I: Extracting mount...
I: Extracting util-linux...
I: Extracting liblzma5...
I: Extracting zlib1g...
I: Installing core packages...
I: Unpacking required packages...
I: Unpacking libacl1:arm64...
I: Unpacking adduser...
I: Unpacking apt...
I: Unpacking libapt-pkg5.0:arm64...
I: Unpacking libattr1:arm64...
I: Unpacking libaudit-common...
I: Unpacking libaudit1:arm64...
I: Unpacking base-files...
I: Unpacking base-passwd...
I: Unpacking bash...
I: Unpacking libbz2-1.0:arm64...
I: Unpacking libdebconfclient0:arm64...
I: Unpacking coreutils...
I: Unpacking dash...
I: Unpacking libdb5.3:arm64...
I: Unpacking debconf...
I: Unpacking debian-archive-keyring...
I: Unpacking debianutils...
I: Unpacking diffutils...
I: Unpacking dpkg...
I: Unpacking e2fsprogs...
I: Unpacking libcom-err2:arm64...
I: Unpacking libext2fs2:arm64...
I: Unpacking libss2:arm64...
I: Unpacking findutils...
I: Unpacking gcc-8-base:arm64...
I: Unpacking libgcc1:arm64...
I: Unpacking libstdc++6:arm64...
I: Unpacking libc-bin...
I: Unpacking libc6:arm64...
I: Unpacking libgmp10:arm64...
I: Unpacking gpgv...
I: Unpacking libgnutls30:arm64...
I: Unpacking grep...
I: Unpacking gzip...
I: Unpacking hostname...
I: Unpacking init-system-helpers...
I: Unpacking libcap-ng0:arm64...
I: Unpacking libffi6:arm64...
I: Unpacking libgcrypt20:arm64...
I: Unpacking libgpg-error0:arm64...
I: Unpacking libidn2-0:arm64...
I: Unpacking libseccomp2:arm64...
I: Unpacking libselinux1:arm64...
I: Unpacking libsemanage-common...
I: Unpacking libsemanage1:arm64...
I: Unpacking libsepol1:arm64...
I: Unpacking libtasn1-6:arm64...
I: Unpacking libunistring2:arm64...
I: Unpacking libzstd1:arm64...
I: Unpacking liblz4-1:arm64...
I: Unpacking mawk...
I: Unpacking libncursesw6:arm64...
I: Unpacking libtinfo6:arm64...
I: Unpacking ncurses-base...
I: Unpacking ncurses-bin...
I: Unpacking libhogweed4:arm64...
I: Unpacking libnettle6:arm64...
I: Unpacking libp11-kit0:arm64...
I: Unpacking libpam-modules:arm64...
I: Unpacking libpam-modules-bin...
I: Unpacking libpam-runtime...
I: Unpacking libpam0g:arm64...
I: Unpacking libpcre3:arm64...
I: Unpacking perl-base...
I: Unpacking sed...
I: Unpacking login...
I: Unpacking passwd...
I: Unpacking libsystemd0:arm64...
I: Unpacking libudev1:arm64...
I: Unpacking sysvinit-utils...
I: Unpacking tar...
I: Unpacking tzdata...
I: Unpacking bsdutils...
I: Unpacking fdisk...
I: Unpacking libblkid1:arm64...
I: Unpacking libfdisk1:arm64...
I: Unpacking libmount1:arm64...
I: Unpacking libsmartcols1:arm64...
I: Unpacking libuuid1:arm64...
I: Unpacking mount...
I: Unpacking util-linux...
I: Unpacking liblzma5:arm64...
I: Unpacking zlib1g:arm64...
I: Configuring required packages...
I: Configuring debian-archive-keyring...
I: Configuring libaudit-common...
I: Configuring libsemanage-common...
I: Configuring ncurses-base...
I: Configuring gcc-8-base:arm64...
I: Configuring libc6:arm64...
I: Configuring libudev1:arm64...
I: Configuring libsepol1:arm64...
I: Configuring libattr1:arm64...
I: Configuring libtasn1-6:arm64...
I: Configuring debianutils...
I: Configuring mawk...
I: Configuring libdebconfclient0:arm64...
I: Configuring base-files...
I: Configuring libbz2-1.0:arm64...
I: Configuring base-passwd...
I: Configuring libdb5.3:arm64...
I: Configuring libtinfo6:arm64...
I: Configuring bash...
I: Configuring libzstd1:arm64...
I: Configuring liblzma5:arm64...
I: Configuring libgpg-error0:arm64...
I: Configuring libgcc1:arm64...
I: Configuring liblz4-1:arm64...
I: Configuring libc-bin...
I: Configuring ncurses-bin...
I: Configuring libacl1:arm64...
I: Configuring libunistring2:arm64...
I: Configuring libsmartcols1:arm64...
I: Configuring libgcrypt20:arm64...
I: Configuring zlib1g:arm64...
I: Configuring libffi6:arm64...
I: Configuring libidn2-0:arm64...
I: Configuring libcom-err2:arm64...
I: Configuring diffutils...
I: Configuring libseccomp2:arm64...
I: Configuring libsystemd0:arm64...
I: Configuring hostname...
I: Configuring libpcre3:arm64...
I: Configuring libcap-ng0:arm64...
I: Configuring libext2fs2:arm64...
I: Configuring libgmp10:arm64...
I: Configuring libp11-kit0:arm64...
I: Configuring libaudit1:arm64...
I: Configuring libuuid1:arm64...
I: Configuring libss2:arm64...
I: Configuring libncursesw6:arm64...
I: Configuring libnettle6:arm64...
I: Configuring gpgv...
I: Configuring libblkid1:arm64...
I: Configuring libstdc++6:arm64...
I: Configuring bsdutils...
I: Configuring libhogweed4:arm64...
I: Configuring e2fsprogs...
I: Configuring libselinux1:arm64...
I: Configuring libgnutls30:arm64...
I: Configuring sed...
I: Configuring libfdisk1:arm64...
I: Configuring findutils...
I: Configuring libmount1:arm64...
I: Configuring libapt-pkg5.0:arm64...
I: Configuring libsemanage1:arm64...
I: Configuring tar...
I: Configuring coreutils...
I: Configuring fdisk...
I: Configuring dpkg...
I: Configuring grep...
I: Configuring perl-base...
I: Configuring init-system-helpers...
I: Configuring gzip...
I: Configuring debconf...
I: Configuring tzdata...
I: Configuring libpam0g:arm64...
I: Configuring dash...
I: Configuring libpam-modules-bin...
I: Configuring libpam-modules:arm64...
I: Configuring passwd...
I: Configuring libpam-runtime...
I: Configuring login...
I: Configuring adduser...
I: Configuring apt...
I: Configuring util-linux...
I: Configuring mount...
I: Configuring sysvinit-utils...
I: Configuring libc-bin...
I: Unpacking the base system...
I: Unpacking apt-utils...
I: Unpacking libapt-inst2.0:arm64...
I: Unpacking libdns-export1104...
I: Unpacking libisc-export1100:arm64...
I: Unpacking bsdmainutils...
I: Unpacking cpio...
I: Unpacking cron...
I: Unpacking debconf-i18n...
I: Unpacking dmidecode...
I: Unpacking libelf1:arm64...
I: Unpacking gdbm-l10n...
I: Unpacking ifupdown...
I: Unpacking init...
I: Unpacking iproute2...
I: Unpacking iptables...
I: Unpacking libip6tc0:arm64...
I: Unpacking libiptc0:arm64...
I: Unpacking libxtables12:arm64...
I: Unpacking iputils-ping...
I: Unpacking isc-dhcp-client...
I: Unpacking isc-dhcp-common...
I: Unpacking kmod...
I: Unpacking less...
I: Unpacking libbsd0:arm64...
I: Unpacking libcap2-bin...
I: Unpacking libestr0:arm64...
I: Unpacking libfastjson4:arm64...
I: Unpacking liblocale-gettext-perl...
I: Unpacking liblognorm5:arm64...
I: Unpacking libmnl0:arm64...
I: Unpacking libnetfilter-conntrack3:arm64...
I: Unpacking libnfnetlink0:arm64...
I: Unpacking libnftnl11:arm64...
I: Unpacking libtext-charwidth-perl...
I: Unpacking libtext-iconv-perl...
I: Unpacking libtext-wrapi18n-perl...
I: Unpacking logrotate...
I: Unpacking lsb-base...
I: Unpacking nano...
I: Unpacking libncurses6:arm64...
I: Unpacking netbase...
I: Unpacking libnewt0.52:arm64...
I: Unpacking whiptail...
I: Unpacking libpopt0:arm64...
I: Unpacking libprocps7:arm64...
I: Unpacking procps...
I: Unpacking readline-common...
I: Unpacking rsyslog...
I: Unpacking sensible-utils...
I: Unpacking libslang2:arm64...
I: Unpacking udev...
I: Unpacking tasksel...
I: Unpacking tasksel-data...
I: Unpacking vim-common...
I: Unpacking vim-tiny...
I: Unpacking xxd...
I: Configuring the base system...
I: Configuring cpio...
I: Configuring libtext-iconv-perl...
I: Configuring libtext-charwidth-perl...
I: Configuring lsb-base...
I: Configuring libip6tc0:arm64...
I: Configuring init...
I: Configuring libestr0:arm64...
I: Configuring libfastjson4:arm64...
I: Configuring libprocps7:arm64...
I: Configuring less...
I: Configuring kmod...
I: Configuring libapt-inst2.0:arm64...
I: Configuring libtext-wrapi18n-perl...
I: Configuring xxd...
I: Configuring libcap2-bin...
I: Configuring vim-common...
I: Configuring libslang2:arm64...
I: Configuring libiptc0:arm64...
I: Configuring libncurses6:arm64...
I: Configuring libmnl0:arm64...
I: Configuring udev...
I: Configuring libxtables12:arm64...
I: Configuring gdbm-l10n...
I: Configuring libisc-export1100:arm64...
I: Configuring liblognorm5:arm64...
I: Configuring nano...
I: Configuring sensible-utils...
I: Configuring libnfnetlink0:arm64...
I: Configuring procps...
I: Configuring netbase...
I: Configuring isc-dhcp-common...
I: Configuring dmidecode...
I: Configuring libbsd0:arm64...
I: Configuring libelf1:arm64...
I: Configuring libdns-export1104...
I: Configuring iputils-ping...
I: Configuring readline-common...
I: Configuring liblocale-gettext-perl...
I: Configuring libpopt0:arm64...
I: Configuring logrotate...
I: Configuring libnewt0.52:arm64...
I: Configuring apt-utils...
I: Configuring iproute2...
I: Configuring cron...
I: Configuring rsyslog...
I: Configuring isc-dhcp-client...
I: Configuring debconf-i18n...
I: Configuring libnftnl11:arm64...
I: Configuring vim-tiny...
I: Configuring ifupdown...
I: Configuring bsdmainutils...
I: Configuring whiptail...
I: Configuring libnetfilter-conntrack3:arm64...
I: Configuring iptables...
I: Configuring tasksel-data...
I: Configuring tasksel...
I: Configuring libc-bin...
I: Configuring systemd...
I: Base system installed successfully.</code></pre></details><h1><span id="rootfs-configutre">Rootfs Configutre</span></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">guzal@GuzalAida:~$</span><br><span class="line"><span class="built_in">cd</span> rootfs</span><br><span class="line"><span class="built_in">sudo</span> mount -o <span class="built_in">bind</span> /dev/ dev</span><br><span class="line"><span class="built_in">sudo</span> mount -o <span class="built_in">bind</span> /dev/pts dev/pts</span><br><span class="line"><span class="built_in">sudo</span> mount -o <span class="built_in">bind</span> /proc proc</span><br><span class="line"><span class="built_in">sudo</span> mount -o <span class="built_in">bind</span> /sys sys</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chroot</span> ./</span><br></pre></td></tr></table></figure><h2><span id="create-user">create user</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser guzal</span><br><span class="line">passwd guzal</span><br></pre></td></tr></table></figure><h2><span id="update-mirrors">update mirrors</span></h2><p>Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown. Could not handshake: Error in the certificate verification.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install locales locales-all</span><br><span class="line">apt install ca-certificates</span><br></pre></td></tr></table></figure><p>换源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上海交通大学 SJTUG软件源镜像服务</span></span><br><span class="line">deb https://mirrors.sjtug.sjtu.edu.cn/debian buster main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.sjtug.sjtu.edu.cn/debian buster main contrib non-free</span></span><br><span class="line">deb https://mirrors.sjtug.sjtu.edu.cn/debian buster-updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.sjtug.sjtu.edu.cn/debian buster-updates main contrib non-free</span></span><br><span class="line">deb https://mirrors.sjtug.sjtu.edu.cn/debian buster-backports main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.sjtug.sjtu.edu.cn/debian buster-backports main contrib non-free</span></span><br><span class="line">deb https://mirrors.sjtug.sjtu.edu.cn/debian-security buster/updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.sjtug.sjtu.edu.cn/debian-security buster/updates main contrib non-free</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清华源 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#deb https://mirrors.tuna.tsinghua.edu.cn/debian/ sid main</span></span><br><span class="line"><span class="comment">#deb https://mirrors.tuna.tsinghua.edu.cn/debian/ experimental main</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中科大源</span></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian buster main contrib non-free</span><br><span class="line"><span class="comment"># deb-src http://mirrors.ustc.edu.cn/debian buster main contrib non-free</span></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian buster-updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src http://mirrors.ustc.edu.cn/debian buster-updates main contrib non-free</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian buster-proposed-updates main contrib non-free</span><br><span class="line"><span class="comment"># deb-src http://mirrors.ustc.edu.cn/debian buster-proposed-updates main contrib non-free</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian-security/ buster/updates main non-free contrib</span><br><span class="line"><span class="comment"># deb-src http://mirrors.ustc.edu.cn/debian-security/ buster/updates main non-free contrib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 本源</span></span><br><span class="line">deb http://deb.debian.org/debian buster main</span><br></pre></td></tr></table></figure><p>在<code>/etc/hosts</code>添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1	localhost</span><br><span class="line">127.0.0.1	GuzalAida</span><br><span class="line"></span><br><span class="line">::1		localhost ip6-localhost ip6-loopback</span><br><span class="line">ff02::1		ip6-allnodes</span><br><span class="line">ff02::2		ip6-allrouters</span><br></pre></td></tr></table></figure><p>更新缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install <span class="built_in">sudo</span> f2fs-tools</span><br><span class="line">apt install net-tools alsa-utils bash-completion ethtool wireless-tools ifupdown network-manager iputils-ping rsyslog locate ttf-wqy-zenhei wget</span><br><span class="line">apt install </span><br></pre></td></tr></table></figure><p>启用Debian源安装最新版本软件sidapt upgrade</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ sid main</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ experimental main</span><br></pre></td></tr></table></figure><p><code>APT::Default-Release &quot;stable&quot;;</code>&gt;&gt;/etc/apt/apt.conf.d/71distro</p><p>使用命令: <code>apt -t experimental install openssh-server</code></p><p>添加用户到<code>/etc/sudoers</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">guzal	ALL=(ALL:ALL)	ALL</span><br></pre></td></tr></table></figure><h2><span id="修改etcresolvconf">修改/etc/resolv.conf</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@GuzalAida:~# <span class="built_in">cat</span> /etc/resolv.conf </span><br><span class="line"><span class="comment"># Generated by NetworkManager</span></span><br><span class="line">search localdomain</span><br><span class="line">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure><h2><span id="wifi国家设置">wifi国家设置</span></h2><p>查看wifi国家或地区设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">guzal@GuzalAida:~$ <span class="built_in">sudo</span> wpa_cli -i wlan0 get country</span><br><span class="line">CN</span><br></pre></td></tr></table></figure><p>raspi-config <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/RPi-Distro/raspi-config/master/raspi-config">https://raw.githubusercontent.com/RPi-Distro/raspi-config/master/raspi-config</a> (recommend)</p><p>设置 OR</p><p>rpi64_init <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/GuzalAida/GuzalAida/master/rpi64-config">https://raw.githubusercontent.com/GuzalAida/GuzalAida/master/rpi64-config</a></p><h2><span id="修改fstsb">修改fstsb</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UNCONFIGURED FSTAB FOR BASE SYSTEM</span></span><br><span class="line">/dev/mmcblk0p1	/boot	vfat	defaults	0	2</span><br><span class="line">/dev/mmcblk0p2	/	f2fs	defaults,noatime	0	1</span><br></pre></td></tr></table></figure><h2><span id="ssh登录凭证">ssh登录凭证</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su guzal -</span><br><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">&quot;example@email.com&quot;</span></span><br></pre></td></tr></table></figure><h2><span id="额外软件">额外软件</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install screenfetch</span><br></pre></td></tr></table></figure><h2><span id="时区-tzdate">时区 tzdate</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg-reconfigure tzdata <span class="comment">#选择时区</span></span><br></pre></td></tr></table></figure><h2><span id="添加etcrpi-issue">添加/etc/rpi-issue</span></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">So sorry,this image not rpi-issue.</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install usbutils -y</span><br></pre></td></tr></table></figure><h1><span id="安装wiringpi">安装WiringPi</span></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone git://git.drogon.net/wiringPi</span><br><span class="line">cd git wiringPi</span><br><span class="line">./build</span><br></pre></td></tr></table></figure><p>gpio设置权限位，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> u+s /opt/wiringPi/bin/gpio</span><br></pre></td></tr></table></figure><p>设置软连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /opt/wiringPi/bin/gpio /usr/bin/gpio</span><br></pre></td></tr></table></figure><h1><span id="设置rsyslog">设置rsyslog</span></h1><p>编辑<code>/etc/rsyslog.conf</code> #GuzalAida daemon log</p><ul><li><code>local0.* /var/log/GuzalAida/GuzalAida0</code></li></ul><p>&amp; <code>sudo mkdir /var/log/GuzalAida</code></p><h1><span id="安装vc">安装VC</span></h1><p>Source code for ARM side libraries for interfacing to Raspberry Pi GPU.</p><p>编辑<code>sudo nano /etc/udev/rules.d/99-input.rules</code>,与以下内容比较</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">SUBSYSTEM==<span class="string">&quot;input&quot;</span>, GROUP=<span class="string">&quot;input&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;i2c-dev&quot;</span>, GROUP=<span class="string">&quot;i2c&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;spidev&quot;</span>, GROUP=<span class="string">&quot;spi&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;bcm2835-gpiomem&quot;</span>, GROUP=<span class="string">&quot;gpio&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;argon-*&quot;</span>, GROUP=<span class="string">&quot;video&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;rpivid-*&quot;</span>, GROUP=<span class="string">&quot;video&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;vchiq&quot;</span>, GROUP=<span class="string">&quot;video&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line"></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;gpio&quot;</span>, GROUP=<span class="string">&quot;gpio&quot;</span>, MODE=<span class="string">&quot;0660&quot;</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;gpio*&quot;</span>, PROGRAM=<span class="string">&quot;/bin/sh -c &#x27;\</span></span><br><span class="line"><span class="string">	chown -R root:gpio /sys/class/gpio &amp;&amp; chmod -R 770 /sys/class/gpio;\</span></span><br><span class="line"><span class="string">	chown -R root:gpio /sys/devices/virtual/gpio &amp;&amp; chmod -R 770 /sys/devices/virtual/gpio;\</span></span><br><span class="line"><span class="string">	chown -R root:gpio /sys<span class="variable">$devpath</span> &amp;&amp; chmod -R 770 /sys<span class="variable">$devpath</span>\</span></span><br><span class="line"><span class="string">&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line">KERNEL==<span class="string">&quot;ttyAMA[01]&quot;</span>, PROGRAM=<span class="string">&quot;/bin/sh -c &#x27;\</span></span><br><span class="line"><span class="string">	ALIASES=/proc/device-tree/aliases; \</span></span><br><span class="line"><span class="string">	if cmp -s <span class="variable">$ALIASES</span>/uart0 <span class="variable">$ALIASES</span>/serial0; then \</span></span><br><span class="line"><span class="string">		echo 0;\</span></span><br><span class="line"><span class="string">	elif cmp -s <span class="variable">$ALIASES</span>/uart0 <span class="variable">$ALIASES</span>/serial1; then \</span></span><br><span class="line"><span class="string">		echo 1; \</span></span><br><span class="line"><span class="string">	else \</span></span><br><span class="line"><span class="string">		exit 1; \</span></span><br><span class="line"><span class="string">	fi\</span></span><br><span class="line"><span class="string">&#x27;&quot;</span>, SYMLINK+=<span class="string">&quot;serial%c&quot;</span></span><br><span class="line"></span><br><span class="line">KERNEL==<span class="string">&quot;ttyS0&quot;</span>, PROGRAM=<span class="string">&quot;/bin/sh -c &#x27;\</span></span><br><span class="line"><span class="string">	ALIASES=/proc/device-tree/aliases; \</span></span><br><span class="line"><span class="string">	if cmp -s <span class="variable">$ALIASES</span>/uart1 <span class="variable">$ALIASES</span>/serial0; then \</span></span><br><span class="line"><span class="string">		echo 0; \</span></span><br><span class="line"><span class="string">	elif cmp -s <span class="variable">$ALIASES</span>/uart1 <span class="variable">$ALIASES</span>/serial1; then \</span></span><br><span class="line"><span class="string">		echo 1; \</span></span><br><span class="line"><span class="string">	else \</span></span><br><span class="line"><span class="string">		exit 1; \</span></span><br><span class="line"><span class="string">	fi \</span></span><br><span class="line"><span class="string">&#x27;&quot;</span>, SYMLINK+=<span class="string">&quot;serial%c&quot;</span></span><br></pre></td></tr></table></figure><p><code>sudo usermod -a -G video guzal</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/ld.so.conf.d/guzalaida.conf</span><br><span class="line">++ /opt/vc/lib</span><br><span class="line"><span class="built_in">sudo</span> ldconfig</span><br></pre></td></tr></table></figure><p>软连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /opt/vc/bin/vcgencmd /usr/bin/vcgencmd</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /opt/vc/bin/vchiq_test /usr/bin/vchiq_test</span><br></pre></td></tr></table></figure><p>test</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vcgencmd measure_clock arm</span><br><span class="line"><span class="comment">#frequency(45)=600000000</span></span><br></pre></td></tr></table></figure><h1><span id="连接5gwif">连接5GWIF</span></h1><p>请先设置wifi country</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmtui -&gt; Activate a connection -&gt; 选择wifi</span><br></pre></td></tr></table></figure><h1><span id="追加软件">追加软件</span></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install bluetooth</span><br><span class="line"><span class="built_in">sudo</span> apt install ntfs-3g</span><br></pre></td></tr></table></figure><h1><span id="update-fstab">update fstab</span></h1><p>sudo chown -R guzal:guzal /mnt/vfat /mnt/btrfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">guzal@GuzalAida:~$ <span class="built_in">cat</span> /etc/fstab </span><br><span class="line"><span class="comment"># UNCONFIGURED FSTAB FOR BASE SYSTEM</span></span><br><span class="line">/dev/mmcblk0p1	/boot	vfat	defaults	0	2</span><br><span class="line">/dev/mmcblk0p2	/	f2fs	defaults,noatime	0	1</span><br><span class="line">UUID=<span class="string">&quot;DAA9-53E7&quot;</span>	/mnt/vfat	vfat	defaults,rw,noexec,noatime,nofail,user,<span class="built_in">umask</span>=0000,uid=1000,gid=1000	0	0</span><br><span class="line">UUID=<span class="string">&quot;225ddd42-b107-4c01-a9ef-da0b38997305&quot;</span>	/mnt/btrfs	btrfs	defaults,rw,noexec,noatime,user,nofail	0	0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><span id="umount">umount</span></h2><p>先退出chroot</p><h3><span id="卸载文件系统">卸载文件系统</span></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> umount dev/pts</span><br><span class="line"><span class="built_in">sudo</span> umount dev</span><br><span class="line"><span class="built_in">sudo</span> umount proc</span><br><span class="line"><span class="built_in">sudo</span> umount sys</span><br></pre></td></tr></table></figure><h3><span id="卸载镜像">卸载镜像</span></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> umount bootfs rootfs</span><br><span class="line"><span class="built_in">sudo</span> kpartx -dv /dev/loop0</span><br><span class="line"><span class="built_in">sudo</span> losetup -d /dev/loop0</span><br></pre></td></tr></table></figure><h1><span id="烧录系统并磁盘扩容">烧录系统并磁盘扩容</span></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> cfdisk /dev/sdX <span class="comment"># resize part size</span></span><br><span class="line"><span class="built_in">sudo</span> resize.f2fs /dev/sdX</span><br></pre></td></tr></table></figure><h1><span id="vnc">VNC</span></h1><p>修改/home/用户目录（家目录）xstartup文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following two lines for normal desktop:</span></span><br><span class="line"><span class="built_in">unset</span> SESSION_MANAGER</span><br><span class="line"><span class="built_in">unset</span> DBUS_SESSION_BUS_ADDRESS</span><br><span class="line"><span class="built_in">exec</span> /etc/X11/xinit/xinitrc</span><br><span class="line"></span><br><span class="line">[ -x /etc/vnc/xstartup ] &amp;&amp; <span class="built_in">exec</span> /etc/vnc/xstartup</span><br><span class="line">[ -r <span class="variable">$HOME</span>/.Xresources ] &amp;&amp; xrdb <span class="variable">$HOME</span>/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line">vncconfig -iconic &amp;</span><br><span class="line"><span class="comment">#x-terminal-emulator -geometry 80x24+10+10 -ls -title &quot;$VNCDESKTOP Desktop&quot; &amp;</span></span><br><span class="line"><span class="comment">#x-window-manager &amp;</span></span><br><span class="line"></span><br><span class="line">mate-session &amp;</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-author"><strong>Author: </strong>Mardan M</li><li class="post-copyright-link hidden-xs"><strong>Post link: </strong><a href="https://www.mardan.wiki/website/1970/01/02/Rpi64%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97.html" title="Rpi64开发日志" target="_blank" rel="external">https://www.mardan.wiki/website/1970/01/02/Rpi64开发日志.html</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA unless stating additionally.</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/ka1i" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.png" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/ka1i" target="_blank"><span class="text-dark">Mardan M</span><small class="ml-1x">DevOps Engineer</small></a></h3><div>Hi there, I’m Mardan(ka1i).</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/website/2018/11/17/%E6%90%AD%E5%BB%BAhexo%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html" title="搭建hexo静态博客"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/website/1970/01/01/New-Features.html" title="New Features"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/ka1i" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2025 Mardan M<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"pure"})</script></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>